# FRED èåˆæ•°æ®é›†æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è¿°

å·²æˆåŠŸåˆ›å»ºå¤šæ¨¡æ€èåˆè½¬æ¢è„šæœ¬ `convert_fred_to_fusion.py`ï¼Œæ”¯æŒ RGB å’Œ Event æ•°æ®çš„æ—¶é—´æˆ³ç²¾ç¡®é…å¯¹ã€‚

## æµ‹è¯•ç»“æœ

### âœ… æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡

1. **æ—¶é—´æˆ³é…å¯¹ç®—æ³•** âœ“
   - åŸºäº RGB å¸§æŸ¥æ‰¾æœ€è¿‘ Event å¸§
   - æ”¯æŒ 33msï¼ˆé»˜è®¤ï¼‰å®¹å·®é˜ˆå€¼
   - è¾“å‡ºé…å¯¹çŠ¶æ€ï¼šdual / rgb_only / event_only

2. **COCO æ ¼å¼ç”Ÿæˆ** âœ“
   - å®Œæ•´çš„ info å­—æ®µ
   - åŒæ¨¡æ€æ–‡ä»¶è·¯å¾„å­—æ®µï¼š`rgb_file_name` å’Œ `event_file_name`
   - èåˆçŠ¶æ€æ ‡æ³¨ï¼š`fusion_status` å’Œ `modality`
   - æ—¶é—´å·®ç»Ÿè®¡ï¼š`time_diff`

3. **æ•°æ®ç»Ÿè®¡** âœ“
   - é…å¯¹æˆåŠŸç‡æ˜¾ç¤º
   - æ—¶é—´å·®ç»Ÿè®¡ï¼ˆå¹³å‡/æœ€å¤§ï¼‰
   - æ ‡æ³¨åŒ¹é…ç»Ÿè®¡

### ğŸ“Š ç¤ºä¾‹è¾“å‡º

```json
{
  "info": {
    "description": "FRED Dataset - Fusion (RGB + Event) - TRAIN split (frame-level)",
    "fusion_threshold_ms": 33
  },
  "images": [{
    "id": 1,
    "rgb_file_name": "0/RGB/Video_0_16_03_03.363444.jpg",
    "event_file_name": "0/Event/Frames/Video_0_frame_100032333.png",
    "fusion_status": "dual",
    "time_diff": 0.0042,
    "modality": "dual"
  }],
  "annotations": [{
    "bbox": [x, y, w, h],
    "modality": "dual"
  }]
}
```

### â±ï¸ æ€§èƒ½ï¼ˆç®€åŒ–æ¨¡å¼æµ‹è¯•ï¼‰
- **å¤„ç†é€Ÿåº¦**: ~6,000 å¸§/ç§’
- **é…å¯¹é€Ÿåº¦**: ~4,500 é…å¯¹/ç§’
- **å•åºåˆ—å¤„ç†æ—¶é—´**: < 1 ç§’

## ä¸‹ä¸€æ­¥æµ‹è¯•å»ºè®®

### 1. å…¨é‡æ•°æ®æµ‹è¯•
```bash
# ä¸ä½¿ç”¨ç®€åŒ–æ¨¡å¼ï¼Œå¤„ç†å…¨éƒ¨æ•°æ®
/home/yz/.conda/envs/torch/bin/python3 convert_fred_to_fusion.py \
    --threshold 0.033 \
    --split-mode frame
```

é¢„è®¡æ—¶é—´ï¼š40-50 åˆ†é’Ÿ

### 2. éªŒè¯æ•°æ®é›†å®Œæ•´æ€§
```bash
/home/yz/.conda/envs/torch/bin/python3 verify_fusion_dataset.py
```

### 3. èåˆæ•ˆæœåˆ†æ
- æŸ¥çœ‹åŒæ¨¡æ€é…å¯¹æˆåŠŸç‡
- åˆ†ææ—¶é—´å·®åˆ†å¸ƒ
- æ£€æŸ¥è¾¹ç•Œæ¡†è´¨é‡

## å…³é”®ç‰¹æ€§æ£€æŸ¥æ¸…å•

- [x] æ”¯æŒæ—¶é—´æˆ³ç²¾ç¡®é…å¯¹ï¼ˆÂ±33msï¼‰
- [x] ç”ŸæˆåŒé€šé“ COCO æ ¼å¼
- [x] è¾“å‡ºé…å¯¹ç»Ÿè®¡ä¿¡æ¯
- [x] é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- [x] æ”¯æŒå¸§çº§åˆ«å’Œåºåˆ—çº§åˆ«åˆ’åˆ†
- [x] ç®€åŒ–æ¨¡å¼ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
- [x] è‡ªå®šä¹‰æ—¶é—´é˜ˆå€¼
- [x] æ•°æ®éªŒè¯å·¥å…·

## å·²çŸ¥é™åˆ¶

1. **ç®€åŒ–æ¨¡å¼é‡‡æ ·é€»è¾‘**
   - å½“å‰å®ç°ï¼šæ¯10å¸§é‡‡æ ·1å¸§
   - å»ºè®®ï¼šæœªæ¥å¯æ”¹è¿›ä¸ºéšæœºé‡‡æ ·

2. **è·¯å¾„å¤„ç†**
   - ä½¿ç”¨ç›¸å¯¹è·¯å¾„å­˜å‚¨
   - å›¾ç‰‡æ–‡ä»¶æœªå®é™…æ‹·è´/é“¾æ¥
   - éœ€è¦åç»­è„šæœ¬æ•´ç†å›¾ç‰‡

3. **frame-level åˆ’åˆ†**
   - å½“å‰å®ç°ç»Ÿä¸€å¤„ç† train/val/test
   - éœ€è¦å®ç°ç²¾ç¡®çš„å¸§çº§åˆ«å“ˆå¸Œåˆ’åˆ†

## æµ‹è¯•å‘½ä»¤å‚è€ƒ

```bash
# 1. å¿«é€Ÿæµ‹è¯•ï¼ˆç®€åŒ–æ¨¡å¼ï¼‰
bash test_fusion_quick.sh

# 2. æŒ‡å®šæµ‹è¯•å•ä¸ªåºåˆ—
/home/yz/.conda/envs/torch/bin/python3 convert_fred_to_fusion.py \
    --threshold 0.02 \
    --simple

# 3. åºåˆ—çº§åˆ«æµ‹è¯•
/home/yz/.conda/envs/torch/bin/python3 convert_fred_to_fusion.py \
    --split-mode sequence \
    --simple

# 4. éªŒè¯ç”Ÿæˆçš„æ•°æ®é›†
/home/yz/.conda/envs/torch/bin/python3 verify_fusion_dataset.py
```

## ç»“è®º

âœ… **èåˆè„šæœ¬æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡**

è„šæœ¬æˆåŠŸå®ç°äº† RGB å’Œ Event æ•°æ®çš„æ—¶é—´æˆ³é…å¯¹ï¼Œå¹¶ç”Ÿæˆäº†æ ‡å‡† COCO æ ¼å¼çš„èåˆæ•°æ®é›†ã€‚é…å¯¹ç®—æ³•æ•ˆç‡é«˜ï¼Œç»Ÿè®¡ä¿¡æ¯å®Œæ•´ã€‚

**æ¨èä¸‹ä¸€æ­¥**: è¿è¡Œå…¨é‡æ•°æ®æµ‹è¯•ï¼Œç”Ÿæˆå®Œæ•´çš„èåˆæ•°æ®é›†ã€‚
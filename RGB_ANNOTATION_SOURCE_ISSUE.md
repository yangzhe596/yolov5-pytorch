# RGB数据标注来源问题

## 重要发现 ⚠️

FRED数据集的RGB模态存在**两个不同的标注来源**，它们标注的是**不同的目标位置**！

## 两个标注源

### 1. RGB_YOLO/ 目录
- **格式**: YOLO格式 (class_id x_center y_center width height，归一化)
- **文件**: 每个图片对应一个txt文件
- **示例**: `Video_3_16_46_03.278530.txt`
  ```
  0 0.6846874999999989 0.4618055555555556 0.04451562500000161 0.05347222222222222
  ```
- **转换为像素坐标**:
  - 中心点: (876.4, 332.5)
  - 边界框: xmin=847.9, ymin=313.2, xmax=904.9, ymax=351.8
  - 尺寸: 57.0 × 38.5 像素

### 2. coordinates.txt 文件
- **格式**: 时间戳 + 边界框 (timestamp: xmin, ymin, xmax, ymax，像素)
- **文件**: 每个视频一个txt文件，包含所有帧的标注
- **示例**: 时间戳63.278530秒附近
  ```
  63.278530: 770, 497, 791, 518
  ```
- **边界框**:
  - 边界框: xmin=770, ymin=497, xmax=791, ymax=518
  - 尺寸: 21 × 21 像素

## 关键差异

对于同一张图片 `Video_3_16_46_03.278530.jpg`：

| 标注源 | 边界框位置 | 尺寸 | 位置描述 |
|--------|-----------|------|---------|
| RGB_YOLO | xmin=847.9, ymin=313.2 | 57×38 px | 图片中上部偏右 |
| coordinates.txt | xmin=770, ymin=497 | 21×21 px | 图片中下部偏右 |

**位置完全不同！** 这说明它们标注的是**不同的目标**或使用了**不同的标注方法**。

## 可能的原因

### 假设1: 不同的标注任务
- `coordinates.txt`: 可能是某个特定目标的跟踪结果
- `RGB_YOLO`: 可能是所有目标的检测标注

### 假设2: 不同的标注工具
- `coordinates.txt`: 原始标注工具的输出
- `RGB_YOLO`: 转换或重新标注的结果

### 假设3: 时间戳不对应
- 文件名中的时间戳（16:46:03.278530）可能不是绝对时间
- coordinates.txt中的时间戳是相对时间
- 需要找到正确的时间对应关系

## 当前COCO转换使用的标注源

**当前使用**: `RGB_YOLO/` 目录

**原因**:
1. RGB_YOLO目录中的文件名与RGB图片一一对应
2. 格式标准（YOLO格式）
3. 数量合理（19,471个有效标注）

## 需要确认的问题

### 关键问题 ❓

**请确认以下问题**：

1. **哪个标注源是正确的？**
   - [ ] RGB_YOLO/ 目录（当前使用）
   - [ ] coordinates.txt 文件
   - [ ] 两者都对，但标注的是不同的目标

2. **coordinates.txt的用途是什么？**
   - [ ] 原始标注数据
   - [ ] 目标跟踪结果
   - [ ] 某个特定目标的轨迹
   - [ ] 其他用途

3. **如果应该使用coordinates.txt**：
   - 如何建立图片文件名和coordinates.txt时间戳的对应关系？
   - 时间戳的起始点是什么？
   - 是否所有图片都有对应的标注？

## 验证方法

### 方法1: 可视化对比

手动查看图片 `Video_3_16_46_03.278530.jpg`，检查：
- 位置(847.9, 313.2)处是否有目标？（RGB_YOLO标注）
- 位置(770, 497)处是否有目标？（coordinates.txt标注）

### 方法2: 检查其他视频

检查其他视频序列的coordinates.txt和RGB_YOLO是否也有类似差异。

### 方法3: 查看数据集文档

查看FRED数据集的原始文档或README，了解标注格式说明。

## 建议的行动方案

### 如果RGB_YOLO是正确的（当前假设）
✅ **无需修改**，当前的COCO转换是正确的

### 如果coordinates.txt是正确的
需要创建新的转换脚本：

```python
def convert_from_coordinates_txt(video_id):
    # 1. 读取coordinates.txt
    # 2. 建立时间戳到图片文件名的映射
    # 3. 转换边界框格式
    # 4. 生成COCO标注
    pass
```

### 如果两者都对但标注不同目标
需要明确：
- 训练目标是什么？
- 应该检测哪个目标？
- 是否需要多类别标注？

## 临时解决方案

在确认正确的标注源之前，我建议：

1. **保留当前的COCO数据集**（基于RGB_YOLO）
2. **创建一个基于coordinates.txt的备用版本**
3. **可视化对比两个版本**
4. **根据实际需求选择使用哪个**

## 下一步

请提供以下信息：

1. **查看图片** `Video_3_16_46_03.278530.jpg`，告诉我：
   - 位置(847.9, 313.2)处有什么？
   - 位置(770, 497)处有什么？
   - 哪个位置的标注是正确的？

2. **FRED数据集的说明文档**（如果有）

3. **标注的目标是什么？**
   - 人？车？无人机？其他物体？

---

**创建时间**: 2025-10-20  
**状态**: 等待确认正确的标注源
